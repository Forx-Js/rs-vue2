"use strict";(self.webpackChunkrs_vue2=self.webpackChunkrs_vue2||[]).push([["295"],{5792:function(t,e,i){i.d(e,{Z:()=>o});var n=i(5400),s=i(400),a=i(6517);let r=(0,n.aZ)({props:{manager:{type:Object,required:!0}},setup(t){let{manager:e}=t,i=(0,n.iH)("#ff0000"),r=(0,n.iH)(!1),o=(0,n.iH)([]),l=(0,n.Fl)(()=>parseInt(i.value.replace("#",""),16));return e.onChange(()=>{o.value=[...e.list]}),{createArrow:async function(){let t=new a.bR;await e.create(t),e.add(t)},createText:async function(){let t=new a.zC;t.data.strText=window.prompt("请输入文本"),t.data.textHeight=30,await e.create(t),e.add(t)},createCircle:async function(){let t=new a.m_;await e.create(t),e.add(t)},createPencil:async function(){do{let t=new a.Gc;t.data.color=l.value,await e.create(t),e.add(t)}while(r.value)},createRect:async function(){let t=new a.Bs;await e.create(t),e.add(t)},createLine:async function(){let t=new a.es;await e.create(t),e.add(t)},createLeadLine:async function(){let t=new a.s({strText:"请输入文本"});await e.create(t),e.add(t)},createCloudMark:async function(){let t=new a.$b;await e.create(t,(t,e)=>{t===a.cQ.EventTypeEnum.MARK&&(e.data.strText=(0,s.Z)("Cloud_"))}),e.add(t)},createCloud:async function(){let t=new a.ET;await e.create(t),e.add(t)},isContinuous:r,clouds:o,clickHandler:async function(t){e.jump(t)},color:i}}}),o=(0,i(4964).Z)(r,function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"shadow-sm border-1 transition-right w-60 fixed top-2 bottom-2 right--60 z-1 bg-white p-2 rounded",attrs:{"un-hover":"right-0"}},[e("div",{staticClass:"bar",attrs:{"un-text":"center 3","un-absolute":"","un-left":"-6","un-w":"6","un-h":"24","un-top":"50","un-rounded":"l","un-bg":"blue-800"}}),e("div",{staticClass:"border-b-1 border-b-solid border-gray pb-2"},[e("div",[t._v(t._s(t.color)),e("input",{directives:[{name:"model",rawName:"v-model",value:t.isContinuous,expression:"isContinuous"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isContinuous)?t._i(t.isContinuous,null)>-1:t.isContinuous},on:{change:function(e){var i=t.isContinuous,n=e.target,s=!!n.checked;if(Array.isArray(i)){var a=t._i(i,null);n.checked?a<0&&(t.isContinuous=i.concat([null])):a>-1&&(t.isContinuous=i.slice(0,a).concat(i.slice(a+1)))}else t.isContinuous=s}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"color"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}})]),e("button",{staticClass:"mr-1 mt-1 bg-blue-500 rounded",attrs:{"un-text":"3 white","un-p":"x-3 y-1","un-hover":"bg-blue"},on:{click:function(e){return t.createCloud()}}},[t._v("添加云线框")]),e("button",{staticClass:"mr-1 mt-1 bg-blue-500 rounded",attrs:{"un-text":"3 white","un-p":"x-3 y-1","un-hover":"bg-blue"},on:{click:function(e){return t.createCloudMark()}}},[t._v("添加云线")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createRect()}}},[t._v("添加矩形")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createLine()}}},[t._v("添加线")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createLeadLine()}}},[t._v("添加引线")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createArrow()}}},[t._v("添加箭头")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createPencil()}}},[t._v("添加画笔")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createCircle()}}},[t._v("添加圆")]),e("button",{staticClass:"mr-1 mt-1 px-3 py-1 text-3 bg-blue-500 text-white rounded hover:bg-blue",on:{click:function(e){return t.createText()}}},[t._v("添加文本")])]),e("ul",{staticClass:"divide-y"},t._l(t.clouds,function(i,n){return e("li",{key:n,staticClass:"px-2 py-1 select-none",on:{click:function(e){return t.clickHandler(i)}}},[e("span",{staticClass:"text-black"},[t._v("【第"+t._s(i.data.index)+"页】"+t._s(i.data.strText)+" ")])])}),0)])},[],!1,null,null,null).exports},2127:function(t,e,i){i.d(e,{x:()=>l});var n=i(3438),s=i(5834),a=i(1944),r=i(5430),o=i(3721);class l{static data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{index:0,strText:"",points:[],mark:[],color:0xff0000,type:"",textHeight:16,lineWidth:2,...t}}get index(){return this.data.index}set index(t){this.data.index=~~t}setPageRect(){let{pageDom:t}=this;this.pageRect=t?t.getBoundingClientRect():void 0}render(){if(!this.visible)return;let t=this.manager.ctx;if(this.setPageRect(),!t||!this.pageRect)return;this._ctx=t,t.beginPath(),t.save();let{color:e,lineWidth:i}=this.data;this.getBoxRect(t);let n=this.setBoxPath(),s=`#${e.toString(16).padStart(6,"0")}`;t.strokeStyle=s,t.fillStyle=s,t.lineWidth=i,this._renderBox(n),this._renderMark(n),t.restore()}setBoxPath(){let t=new Path2D;return this.boxPath=t,t}_renderBox(t){let{data:{points:e}}=this;e.length&&this._ctx.stroke(t)}_transform(){return this.manager._transform(this)}_renderMark(){let{data:{mark:t,strText:e,textHeight:i},boxRect:n,_ctx:s}=this;t.length&&e&&(s.save(),s.font=`bold ${i}px fangsong,'sans-serif'`,s.textAlign=n.markX>=n.x2?"left":n.markX<=n.x1?"right":"center",s.textBaseline=n.markY>n.y2?"top":n.markY<n.y1?"bottom":"middle",s.fillText(e,n.markX,n.markY),s.restore())}getBoxRect(){let{points:t,mark:[e,i]}=this._transform(),n=this.pageRect,l=this._ctx.canvas.getBoundingClientRect(),{width:c,height:h}=n,d=n.left-l.left,u=n.top-l.top,p=1,[v,g]=(0,s.Z)(t,()=>p++%2),m=v.map(t=>t*c+d),x=g.map(t=>t*h+u),_=(0,a.Z)(m),b=(0,r.Z)(m),w=(0,a.Z)(x),f=(0,r.Z)(x),y=(0,o.Z)(m,x);return this.boxRect={width:c,height:h,left:d,top:u,points:y,x1:_,y1:w,x2:b,y2:f,cx:_+(b-_>>1),cy:w+(f-w>>1),markX:e*c+d,markY:i*h+u,mousePoint:[]},this.boxRect}async create(){console.warn("box create is not implemented")}constructor(t){(0,n._)(this,"type",void 0),(0,n._)(this,"data",{}),(0,n._)(this,"pageRect",void 0),(0,n._)(this,"pageDom",void 0),(0,n._)(this,"_ctx",void 0),(0,n._)(this,"manager",void 0),(0,n._)(this,"isHover",!1),(0,n._)(this,"visible",!0),(0,n._)(this,"boxPath",void 0),(0,n._)(this,"boxRect",{width:0,height:0,left:0,top:0,x1:0,y1:0,x2:0,y2:0,cx:0,cy:0,markX:0,markY:0,mousePoint:[],points:[]});let e=this.constructor.data(t);e.type=this.type,this.data=e}}},3098:function(t,e,i){i.d(e,{d:()=>x});var n=i(8296),s=i(6541),a=i(720),r=i(3438),o=i(6482),l=i(5430),c=i(1944),h=i(2268),d=i(2127),u=i(6730),p=i(5236),v=i(7446);class g{update(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;this.clear();let s=(0,u.Z)(t),a=(0,u.Z)(e),r=(0,p.Z)(Object.keys(i),a),o=new AbortController,l=v.c.withResolvers();l.promise.finally(()=>{o.abort()});let c=r.map(t=>{let e=a.indexOf(t)>-1;return[t,s=>{s.preventDefault(),s.stopPropagation(),i[t]&&i[t].call(n,s),e&&l.resolve(s)}]});for(let t of s)for(let[e,i]of c)t.addEventListener(e,i,{signal:o.signal,capture:!0});return this.controller=o,this.resolver=l,this.clear=()=>{l.reject("create event abort")},l.promise}clear(){}constructor(t){(0,r._)(this,"controller",void 0),(0,r._)(this,"resolver",void 0),this.manager=t}}var m=new WeakMap;class x{setScrollEl(t){t.addEventListener("scroll",this._onPageScroll),this._size_obs.observe(t),this.scrollEl=t}setParentEl(t){this.setCanvas(),t.appendChild(this.canvas),this.parentEl=t}setViewEl(t){this._page_obs.observe(t,{childList:!0}),t.addEventListener("contextmenu",this._onContextmenu),this.viewEl=t}_onIntersectionObserver(t){let e=this._activePage;for(let i of t)i.isIntersecting||i.isVisible?e.add(i.target):e.delete(i.target);this.renderView()}_onMutationObserver(){let t=this.parentEl.querySelectorAll(".page"),e=this._scroll_obs,i=this._size_obs;for(let n of t)e.observe(n),i.observe(n)}_obResizeObserver(){let t=this.scrollEl.getBoundingClientRect();this.canvas.height=t.height,this.canvas.width=t.width;let e=t.left,i=t.top;this.canvas.style.left=e+"px",this.canvas.style.top=i+"px",this.renderView()}_initObs(){this._scroll_obs=new IntersectionObserver(this._onIntersectionObserver.bind(this)),this._page_obs=new MutationObserver(this._onMutationObserver.bind(this)),this._size_obs=new ResizeObserver(this._obResizeObserver.bind(this))}get ctx(){let{canvas:t}=this;return t?t.getContext("2d"):void 0}onChange(t){(0,a._)(this,m,t)}setCanvas(t){return t||(t=document.createElement("canvas")),t.classList.add("cloud-canvas"),Object.assign(t.style,{position:"fixed",zIndex:1,pointerEvents:"none",top:0,left:0}),this.canvas=t,t}render(t){let{ctx:e}=this;if(e)for(let i of(e.reset(),t))i.render()}add(t){var e;let i=t?[].concat(t).filter(t=>t instanceof d.x):[];if(t){for(let t of i)t.manager=this,this.list.push(t);this.renderView(),null===(e=(0,n._)(this,m))||void 0===e||e.call(this,this.list)}}clear(t){var e;let i=t?[].concat(t):this.list;for(let t of((0,o.Z)(this.list,i),this.renderView(),i))t.manager=null;null===(e=(0,n._)(this,m))||void 0===e||e.call(this,i)}renderFn(){let t=this.list,e=[],i=this._activePage,n=this._tem_box;for(let s of i){let i=~~s.dataset.pageNumber;for(let n of t)n.index===i&&(n.pageDom=s,e.push(n));n&&n.index===i&&e.push(n)}this.visibleClouds=e.filter(t=>t.visible),this.render(e)}_transform(t){return{...t.data}}create(){console.warn("create is not implemented")}stopCreate(){this._tem_box=null,this.renderView(),this._events.clear()}destroy(){this._scroll_obs.disconnect(),this._page_obs.disconnect(),this._size_obs.disconnect(),this.scrollEl.removeEventListener("scroll",this._onPageScroll),this._tem_box=null,this.clear(),this.renderView(),this._events.clear()}getXY(){return console.warn("getXY is not implemented"),[0,0]}jump(){console.warn("jump is not implemented")}jumpToPageAndMark(t,e){let{canvas:i}=this,{points:n,mark:s}=e.data,[a,r]=[...n,...s].reduce((t,e,i)=>(t[i%2].push(e),t),[[],[]]),o=((0,l.Z)(a)+(0,c.Z)(a))/2,h=((0,l.Z)(r)+(0,c.Z)(r))/2,{height:d,width:u}=i.getBoundingClientRect(),p=t.offsetLeft+t.clientWidth*o-(u>>1),v=t.offsetTop+t.clientHeight*h-(d>>1);this.scrollEl.scrollTo({left:p,top:v})}getEventData(t){return{e:t,index:1,point:this.getXY(t),el:t.target}}getAllPage(){return console.warn("getAllPage is not implemented"),[]}constructor(){(0,r._)(this,"list",[]),(0,s._)(this,m,{writable:!0,value:void 0}),(0,r._)(this,"_tem_box",void 0),(0,r._)(this,"_events",new g(this)),(0,r._)(this,"_activePage",new Set),(0,r._)(this,"_scroll_obs",void 0),(0,r._)(this,"_page_obs",void 0),(0,r._)(this,"_size_obs",void 0),(0,r._)(this,"scrollEl",void 0),(0,r._)(this,"parentEl",void 0),(0,r._)(this,"viewEl",void 0),(0,r._)(this,"renderView",(0,h.Z)(this.renderFn,45,{leading:!1,trailing:!0})),(0,r._)(this,"_onPageScroll",()=>this.renderView()),this._initObs()}}},6517:function(t,e,i){i.d(e,{Bs:()=>w,es:()=>f,ET:()=>x,cQ:()=>v.c,bR:()=>y,s:()=>E,$b:()=>b,zC:()=>C,Gc:()=>P,m_:()=>T,K9:()=>o});var n=i(3438),s=i(4590),a=i(3997),r=i(3098);class o extends r.d{get pdfViewer(){var t,e;return null===(e=this.iframe.contentWindow)||void 0===e?void 0:null===(t=e.PDFViewerApplication)||void 0===t?void 0:t.pdfViewer}setIframe(t){this.iframe=t;let e=t.contentDocument,i=e.querySelector("#viewerContainer"),n=e.querySelector("#viewer");this.setScrollEl(i),this.setParentEl(e.body),this.setViewEl(n)}async create(t,e){this.renderView(),this._tem_box=t,t.manager=this,this.scrollEl.style.touchAction="none";try{await t.create(e)}finally{this.scrollEl.style.removeProperty("touch-action")}let i=this.pdfViewer?this.pdfViewer._pages[t.index-1]:{};t.data.scale=i.viewport.scale,this._tem_box===t&&(this._tem_box=null)}getEventData(t){let e=l(t);return{e:t,index:~~e.dataset.pageNumber,el:e,point:this.getXY(t)}}getXY(t){let e=l(t),i=e.getBoundingClientRect(),n=~~e.dataset.pageNumber,s=this.pdfViewer?this.pdfViewer._pages[n-1]:{},a=(t.clientX-i.left)/i.width,r=(t.clientY-i.top)/i.height;return this.getRotateXY([a,r],360-s.viewport.rotation)}getRotateXY(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e/90;return i%2&&t.reverse(),(2===i||1===i)&&(t[0]=1-t[0]),(2===i||3===i)&&(t[1]=1-t[1]),t}_transform(t){let{data:e,index:i}=t,n=this.pdfViewer?this.pdfViewer._pages[i-1]:{},r={...e,points:[],mark:[]};return r.points=(0,s.Z)((0,a.Z)(e.points,2).map(t=>this.getRotateXY(t,n.viewport.rotation))),r.mark=this.getRotateXY([...e.mark],n.viewport.rotation),r}jump(t){let{pdfViewer:e}=this;e.currentScale=t.data.scale;let i=e._pages[t.index-1].div;this.jumpToPageAndMark(i,t)}getAllPage(){return[...this.viewEl.querySelectorAll(".page")]}constructor(...t){super(...t),(0,n._)(this,"iframe",void 0)}}function l(t){return t.target.closest(".page")}var c=i(1729),h=i(6103),d=i(188),u=i(2164),p=i(437),v=i(7446),g=i(2127),m=new WeakSet;class x extends g.x{setBoxPath(){let t=new Path2D,{boxRect:{points:e,markX:i,markY:n}}=this;if(!e.length)return t;let s=(0,c._)(this,m,_).call(this);for(let e=0;e<s.length;e++){let{x:i,y:n,r:a,start:r,end:o}=s[e];t.arc(i,n,a,r,o)}if(t.closePath(),this.data.mark.length){let e=this._ctx.isPointInPath(t,i,n),a=new Path2D,r={index:-1,diff:0};for(let t=0;t<s.length;t++){let{x:e,y:a}=s[t],o=(0,d.Z)(Math.abs(e-i),Math.abs(a-n));(0===t||o<r.diff)&&(r.index=t,r.diff=o)}let{x:o,y:l,r:c}=s[r.index],h=Math.atan2(n-l,i-o),u=e?h+Math.PI:h;a.arc(o,l,c,u,u),a.lineTo(i,n),t.addPath(a)}return this.boxPath=t,t}constructor(...t){super(...t),(0,h._)(this,m),(0,n._)(this,"type",v.c.BoxTypeEnum.cloud),(0,n._)(this,"create",v.c.dblPointHandler)}}function _(){let{boxRect:t}=this,e=Math.min(t.x2-t.x1,t.y2-t.y1),i=(0,u.Z)(e,6,14),n=t.x1+i,s=t.y1+i,a=t.x2,r=t.y2,o=a-n,l=r-s,c=Math.max(Math.ceil(o/i/1.5),1),h=Math.max(Math.ceil(l/i/1.5),1),d=o/c,v=l/h,g=[Array.from({length:c},(t,e)=>e*d+n),Array.from({length:h},(t,e)=>e*v+s)],m=[],x=Math.acos(d/2/i),_=Math.asin(v/2/i);m.push(g[0].map(t=>({x:t,y:g[1][0],r:i,start:Math.PI+x,end:2*Math.PI-x})),g[1].map(t=>({x:g[0].at(-1),y:t,r:i,start:-_,end:_})),g[0].map(t=>({x:t,y:g[1].at(-1),r:i,start:x,end:Math.PI-x})).reverse(),g[1].map(t=>({x:g[0][0],y:t,r:i,start:Math.PI-_,end:Math.PI+_})).reverse()),m[0][0].start=m[3].at(-1).end,m[1][0].start=m[0].at(-1).end,m[2][0].start=m[1].at(-1).end,m[3][0].start=m[2].at(-1).end;let b=[];for(let t=0;t<m.length;t++){let e=m[t];for(let t=0;t<e.length;t++){let i=e[t];if(!t){let t=(0,p.Z)(b);if(t){t.end=i.end;continue}}b.push(i)}}if(b.length>1){let t=b.pop();b[0].start=t.start}else b[0].end=b[0].end+2*Math.PI;return b}class b extends x{constructor(...t){var e;super(...t),e=this,(0,n._)(this,"type",v.c.BoxTypeEnum.cloudMark),(0,n._)(this,"create",async function(){let t,i,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},{manager:a,data:r}=e,o=a.getAllPage();await s(v.c.EventTypeEnum.POINT,e,0),t=await a._events.update(o,"pointerdown");let{el:l,index:c,point:h}=a.getEventData(t);e.pageDom=l,e.index=c,[i,n]=h,r.points[0]=i,r.points[1]=n,await s(v.c.EventTypeEnum.POINT,e,1),t=await a._events.update(l,"pointerup",{pointermove:t=>{let{point:[e,i]}=a.getEventData(t);r.points[2]=e,r.points[3]=i,a.renderView()}}),await s(v.c.EventTypeEnum.MARK,e,0),t=await a._events.update(l,"pointerup",{pointermove:t=>{let{point:[e,i]}=a.getEventData(t);r.mark[0]=e,r.mark[1]=i,a.renderView()}}),await s(v.c.EventTypeEnum.DONE,e,0)})}}class w extends g.x{setBoxPath(){let t=new Path2D,{x1:e,y1:i,x2:n,y2:s}=this.boxRect;return t.rect(e,i,n-e,s-i),this.boxPath=t,t}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.rect),(0,n._)(this,"create",v.c.dblPointHandler)}}class f extends g.x{setBoxPath(){let t=new Path2D,{points:e}=this.boxRect;for(let[i,n]of(t.moveTo(e[0][0],e[0][1]),e))t.lineTo(i,n);return this.boxPath=t,t}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.line),(0,n._)(this,"create",v.c.dblPointHandler)}}class y extends g.x{setBoxPath(){let t=new Path2D,{boxRect:{points:e},data:{textHeight:i}}=this;for(let[i,n]of(t.moveTo(...e[0]),e))t.lineTo(i,n);let n=Math.min(Math.hypot(e[1][1]-e[0][1],e[1][0]-e[0][0])/2,i),s=Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0]),a=Math.PI+Math.PI/10;return t.moveTo(e[1][0]+n*Math.cos(s+a),e[1][1]+n*Math.sin(s+a)),t.lineTo(e[1][0],e[1][1]),t.lineTo(e[1][0]+n*Math.cos(s-a),e[1][1]+n*Math.sin(s-a)),this.boxPath=t,t}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.arrow),(0,n._)(this,"create",v.c.dblPointHandler)}}class E extends g.x{async create(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},{manager:i,data:n}=this,s=i.getAllPage(),a=0,r=t=>{let{point:e}=i.getEventData(t),[s,a]=e;n.points.splice(2,2,s,a),n.mark.splice(0,2,s,a),i.renderView()};await e(v.c.EventTypeEnum.POINT,this,0),t=await i._events.update(s,"pointerdown");let{el:o,index:l}=i.getEventData(t);this.pageDom=o,this.index=l,await e(v.c.EventTypeEnum.POINT,this,a++),t=await i._events.update(o,"pointerup",{pointermove:r,pointerup:r}),await e(v.c.EventTypeEnum.DONE,this,0)}setBoxPath(){let t=new Path2D,{points:[e,i]}=this.boxRect,n=e[0]<i[0],s=Math.max(.1*Math.abs(e[0]-i[0]),30),a=[i[0]+(n?-s:s),i[1]];return t.moveTo(...i),t.lineTo(...a),t.lineTo(...e),this.boxPath=t,t}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.leadLine)}}class P extends g.x{setBoxPath(){let t=new Path2D,{points:e}=this.boxRect;if(e.length)for(let[i,n]of(t.moveTo(e[0][0],e[0][1]),e))t.lineTo(i,n);return this.boxPath=t,t}async create(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},{manager:i,data:n}=this,s=i.getAllPage(),a=0;await e(v.c.EventTypeEnum.POINT,this,a++),t=await i._events.update(s,"pointerdown");let{el:r,index:o}=i.getEventData(t);this.pageDom=r,this.index=o,t=await i._events.update(r,"pointerup",{pointermove:t=>{let{point:s}=i.getEventData(t),[r,o]=s;e(v.c.EventTypeEnum.POINT,this,a++),n.points.push(r,o),i.renderView()}}),e(v.c.EventTypeEnum.DONE,this,0)}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.pencil)}}class T extends g.x{setBoxPath(){let t=new Path2D,{x2:e,y2:i,cx:n,cy:s}=this.boxRect;return t.ellipse(n,s,e-n,i-s,0,0,2*Math.PI),this.boxPath=t,t}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.circle),(0,n._)(this,"create",v.c.dblPointHandler)}}class C extends g.x{async create(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},{manager:i,data:n}=this,s=i.getAllPage(),a=t=>{let{point:e}=i.getEventData(t);n.points=[...e],n.mark=[...e],i.renderView()};await e(v.c.EventTypeEnum.POINT,this,0),t=await i._events.update(s,"pointerdown",{pointerdown:a});let{el:r,index:o}=i.getEventData(t);this.pageDom=r,this.index=o,t=await i._events.update(r,"pointerup",{pointermove:a}),e(v.c.EventTypeEnum.DONE,this,0)}constructor(...t){super(...t),(0,n._)(this,"type",v.c.BoxTypeEnum.text)}}},7446:function(t,e,i){i.d(e,{c:()=>s});var n=i(3438);class s{static withResolvers(){let t,e;return{promise:new Promise((i,n)=>{t=i,e=n}),resolve:t,reject:e}}static async dblPointHandler(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},{manager:i,data:n}=this,a=i.getAllPage(),r=0,o=t=>{let{point:e}=i.getEventData(t),[s,a]=e;n.points.splice(2*r,2,s,a),i.renderView()};await e(s.EventTypeEnum.POINT,this,0),t=await i._events.update(a,"pointerdown");let{el:l,index:c}=i.getEventData(t);this.pageDom=l,this.index=c,await e(s.EventTypeEnum.POINT,this,r++),t=await i._events.update(l,"pointerup",{pointermove:o,pointerup:o}),await e(s.EventTypeEnum.DONE,this,0)}}(0,n._)(s,"BoxTypeEnum",{cloud:"CLOUD",cloudMark:"CLOUD_MARK",rect:"RECT",line:"LINE",pencil:"PENCIL",circle:"CIRCLE",text:"TEXT",arrow:"ARROW",leadLine:"LEAD_LINE"}),(0,n._)(s,"ManagerTypeEnum",{PDF:"PDF"}),(0,n._)(s,"EventTypeEnum",{POINT:"POINT",MARK:"MARK",DONE:"DONE"})}}]);